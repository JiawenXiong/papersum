+++
date = '2025-12-28T17:04:05+01:00'
draft = false
title = 'VeruSAGE：基于代理的大规模 Rust 系统验证研究'

+++

**英文标题：** VeruSAGE: A Study of Agent-Based Verification for Rust Systems
**作者：** Chenyuan Yang, Natalie Neamtu, Chris Hawblitzel, Jacob R. Lorch, Shan Lu
**单位：** 伊利诺伊大学厄巴纳-香槟分校、卡内基梅隆大学、微软研究院、芝加哥大学
**发布时间：**  2025年12月20日

## 摘要

本文提出了一种基于代理的框架 VeruSAGE 来评估不同 LLMs 在 Rust 系统验证中的能力，并构建了大规模验证基准 VeruSAGE-Bench。通过对多种 LLM 及代理组合的实验比较，验证了代理系统能显著提升证明成功率。研究表明先进 LLMs 已具备实际帮助开发高可靠性系统软件的证明能力，为未来自动化软件验证工具的发展奠定基础。

##  研究动机

系统软件通常要求 **高可靠性与严格正确性证明**，尤其是用 Rust 编写的操作系统和关键组件。虽然大型语言模型（LLMs）在理解和生成代码方面表现出色，但它们 **是否具有为复杂系统生成形式化证明的能力仍未可知**。论文旨在：

- 评估现有 LLMs 对真实系统级 Rust 代码的形式化验证能力；
- 构建一个全面的评估基准来测量这一能力；
- 探索如何设计代理系统（agent systems）让 LLM 更好地完成形式验证任务。

##  研究方法

研究主要包括两个部分：

### 1. 构建验证基准 **VeruSAGE-Bench**

- 从 **8 个真实开源的 Verus-verified Rust 系统** 中抽取 849 个证明任务；
- 每个任务对应一段待证明的 Rust + Verus 代码；
- 基准比现有的小程序验证任务复杂得多（规模更大、证明更深）。 

### 2. 设计不同的代理系统（Agent-Based Frameworks）

研究了两类代理系统：

#### Hands-Off（免手动引导）

- 使用泛用的编码 agent（如 Copilot CLI）；
- LLM 仅通过标准库和工具（Verus 本体与检查器）自行生成证明；
- 适合高性能模型如 Claude Sonnet 系列。 

####  Hands-On（精细引导）

- 为 LLM 提供更复杂的策略、分阶段推理、计划与反馈循环；
- 需要“教授” LLM 系统级证明策略；
- 更适合逻辑推理较弱的模型（如 o4-mini 等）。 

##  关键模块与流程介绍

### VeruSAGE-Bench 构建流程

1. **选择项目**：8 个不同类型的 Verus 系统代码；
2. **任务提取**：将每个证明函数及依赖提取成独立 Rust 文件；
3. **剥离证明**：移除原证明让 LLM 从零开始补全；
4. **标准化任务**：形成统一、可自动评估的验证任务集。 

### 代理系统典型模块

| 模块                | 作用                               |
| - | ---- |
| LLM 推理引擎        | 负责生成草拟证明标注代码           |
| 验证器接口（Verus） | 自动检查证明是否有效               |
| 策略调度器          | 引导不同阶段推理与决策             |
| 反馈循环            | 将验证失败信息反馈给 LLM，迭代改进 |

## 实验结果与发现

- **不同组合表现差异大**：不同 LLM + 代理构成的组合表现差异明显，无法单凭模型本身下结论。
- **最优组合**：最佳 LLM-代理组合在 VeruSAGE-Bench 上能 **成功完成超 80% 的证明任务**。
- **超出人类专家**：甚至在一些人类专家尚未完成的任务上也能证明成功（超过 90% 的成功率）。
- **不同任务难度差异明显**：系统级证明比小程序证明更加依赖辅助定理、复杂规范和策略。 

## 核心思想

借助精心设计的代理系统，当前最先进的 LLMs 已具备 **自动生成复杂 Rust 系统软件形式化正确性证明** 的能力，并可以大幅提高传统验证方法的效率与覆盖范围。

## 后续研究方向

未来可能进一步研究：

- **更多复杂策略设计**：让代理更智能化、自动化；
- **跨语言/跨工具验证**：将方法推广到其他语言或形式化工具；
- **进一步提升自动推理能力**：特别是对循环、重复结构等的证明；
- **减少人工提示与引导**，实现更强的“零引导证明”。 

## 论文来源

[2512.18436] VeruSAGE: A Study of Agent-Based Verification for Rust Systems
https://arxiv.org/abs/2512.18436





